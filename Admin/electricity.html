<!DOCTYPE html>
<html lang="en">
<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<title>Pike Admin - Free Bootstrap 4 Admin Template</title>
		<meta name="description" content="Free Bootstrap 4 Admin Theme | Pike Admin">
		<meta name="author" content="Pike Web Development - https://www.pikephp.com">

		<!-- Favicon -->
		<link rel="shortcut icon" href="assets/images/favicon.ico">

		<!-- Bootstrap CSS -->
		<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		
		<!-- Font Awesome CSS -->
		<link href="assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		
		<!-- Custom CSS -->
		<link href="assets/css/style.css" rel="stylesheet" type="text/css" />		
		
		<!-- BEGIN CSS for this page -->
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css"/>	
		<style>	
		td.details-control {
		background: url('assets/plugins/datatables/img/details_open.png') no-repeat center center;
		cursor: pointer;
		}
		tr.shown td.details-control {
		background: url('assets/plugins/datatables/img/details_close.png') no-repeat center center;
		}
		</style>		
		<!-- END CSS for this page -->
				
</head>

<body class="adminbody">
		
<div id="main">

	<!-- top bar navigation -->
	<div class="headerbar">

		<!-- LOGO -->
        <div class="headerbar-left">
			<a href="index.html" class="logo"><img alt="Logo" src="assets/images/logo.png" /> <span>Admin</span></a>
        </div>

        <nav class="navbar-custom">

                    <ul class="list-inline float-right mb-0">
						
						<li class="list-inline-item dropdown notif">
                            <a class="nav-link dropdown-toggle arrow-none" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                <i class="fa fa-fw fa-question-circle"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-arrow dropdown-arrow-success dropdown-lg">
                                <!-- item-->
                                <div class="dropdown-item noti-title">
                                    <h5><small>Help and Support</small></h5>
                                </div>

                                <!-- item-->
                                <a target="_blank" href="https://www.pikeadmin.com" class="dropdown-item notify-item">                                    
                                    <p class="notify-details ml-0">
                                        <b>Support guide one</b>
                                        <span>Contact Us</span>
                                    </p>
                                </a>

								<!-- item-->
                                <a target="_blank" href="https://www.pikeadmin.com" class="dropdown-item notify-item">                                    
                                    <p class="notify-details ml-0">
                                        <b>Support guide Two</b>
                                        <span>Contact Us</span>
                                    </p>
                                </a>
                                <!-- All-->
                                <a title="Clcik to HviewTech official website" target="_blank" href="http://www.hviewtech.com" class="dropdown-item notify-item notify-all">
                                    <i class="fa fa-link"></i> Visit HviewTech official website
                                </a>

                            </div>
                        </li>

                        <li class="list-inline-item dropdown notif">
                            <a class="nav-link dropdown-toggle nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                <img src="assets/images/avatars/admin.png" alt="Profile image" class="avatar-rounded">
                            </a>
                            <div class="dropdown-menu dropdown-menu-right profile-dropdown ">
                                <!-- item-->
                                <div class="dropdown-item noti-title">
                                    <h5 class="text-overflow"><small> Admin</small> </h5>
                                </div>

                                <!-- item-->
                                <a href="pro-profile.html" class="dropdown-item notify-item">
                                    <i class="fa fa-user"></i> <span>Profile</span>
                                </a>

                                <!-- item-->
                                <a href="#" class="dropdown-item notify-item">
                                    <i class="fa fa-power-off"></i> <span>Logout</span>
                                </a>
                            </div>
                        </li>

                    </ul>

                    <ul class="list-inline menu-left mb-0">
                        <li class="float-left">
                            <button class="button-menu-mobile open-left">
								<i class="fa fa-fw fa-bars"></i>
                            </button>
                        </li>                        
                    </ul>

        </nav>

	</div>
	<!-- End Navigation -->
	
 
	<!-- Left Sidebar -->
	<div class="left main-sidebar">
	
		<div class="sidebar-inner leftscroll">

			<div id="sidebar-menu">
        
				<ul>

					<li class="submenu">
						<a href="index.html"><i class="fa fa-fw fa-bars"></i><span> Dashboard </span> </a>
                    </li>
					
					<li class="submenu">
                        <a class="active" href="#"><i class="fa fa-fw fa-table"></i> <span> Orders </span> <span class="menu-arrow"></span></a>
							<ul class="list-unstyled">
								<li><a href="bus-tickets.html">Bus tickets</a></li>
								<li class="active"><a href="electricity.html">Electricity</a></li>
								<li><a href="water.html">Water</a></li>
								<li><a href="airtime.html">Mobile Airtime</a></li>
							</ul>
                    </li>
										
                    <li class="submenu">
						<a href="users.html"><i class="fa fa-fw fa-bars"></i><span> User management </span> </a>
                    </li>
	
            </ul>

            <div class="clearfix"></div>

			</div>
        
			<div class="clearfix"></div>

		</div>

	</div>
	<!-- End Sidebar -->

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	  <div class="modal-content">
		<div class="modal-header">
		  <h5 class="modal-title" id="exampleModalLabel">More Information</h5>
		  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		  </button>
		</div>
		<div class="modal-body" id="more_info">
		 
		</div>
		<div class="modal-footer">
		  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		 
		</div>
	  </div>
	</div>
  </div>

    <div class="content-page">
	
		<!-- Start content -->
        <div class="content">
            
			<div class="container-fluid">

					
							
				<div class="row">
						<div class="col-xl-12">
								<div class="breadcrumb-holder">
										<h1 class="main-title float-left">Electricity</h1>
										<ol class="breadcrumb float-right">
											<li class="breadcrumb-item">Home</li>
											<li class="breadcrumb-item active">Electricity</li>
										</ol>
										<div class="clearfix"></div>
								</div>
						</div>
				</div>
				<!-- end row -->


				<div class="row">
						
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 col-xl-12">						
						<div class="card mb-3">
							<div class="card-header">
								<h3><i class="fa fa-table"></i> Electricity purchase history</h3>
							</div>
								
							<div class="card-body">
								<div class="table-responsive">
								<table id="example1" class="table table-bordered table-hover display">
									<thead>
										<tr>
											<th>Ref No</th>
											<th>Customer Name</th>
											<th>Meter Number</th>
											<th>Date</th>
											<th>Volume</th>
											<th>Total</th>
											<th>Payment Status</th>
											<th>Action</th>
										</tr>
									</thead>										
									<tbody>
										
										
									</tbody>
								</table>
								</div>
								
							</div>														
						</div><!-- end card-->					
					</div>

				</div>			
			


            </div>
			<!-- END container-fluid -->

		</div>
		<!-- END content -->

    </div>
	<!-- END content-page -->
    
	<footer class="footer">
		<span class="text-right">
		Copyright <a target="_blank" href="http://www.wawupay.com">WawuPay</a>
		</span>
		<span class="float-right">
		Powered by <a target="_blank" href="http://www.hviewtech.com"><b>HviewTech G Ltd</b></a>
		</span>
	</footer>

</div>
<!-- END main -->

<script src="assets/js/modernizr.min.js"></script>
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/moment.min.js"></script>

<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>

<script src="assets/js/detect.js"></script>
<script src="assets/js/fastclick.js"></script>
<script src="assets/js/jquery.blockUI.js"></script>
<script src="assets/js/jquery.nicescroll.js"></script>

<!-- App js -->
<script src="assets/js/pikeadmin.js"></script>

<!-- BEGIN Java Script for this page -->
	<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>

	<script>
	// START CODE FOR BASIC DATA TABLE 
	$(document).ready(function() {
		$('#example1').DataTable();
	} );
	// END CODE FOR BASIC DATA TABLE 
		
		// START CODE Individual column searching (text inputs) DATA TABLE 		
		$(document).ready(function() {
			// Setup - add a text input to each footer cell
			$('#example4 thead th').each( function () {
				var title = $(this).text();
				$(this).html( '<input type="text" placeholder="Search '+title+'" />' );
			} );
		 
			// DataTable
			var table = $('#example4').DataTable();
		 
			// Apply the search
			table.columns().every( function () {
				var that = this;
		 
				$( 'input', this.header() ).on( 'keyup change', function () {
					if ( that.search() !== this.value ) {
						that
							.search( this.value )
							.draw();
					}
				} );
			} );
		} );
		// END CODE Individual column searching (text inputs) DATA TABLE 	 	
	</script>	
<!-- END Java Script for this page -->
<script>
$.ajax({
    url:"http://localhost:8097/electricity/all",
    method:"post",
    dataType:"json",
    cache:false,
    success:function(data){
        for(var top in data.RETURN_DATA.data){
            // tables.row.add([data.RETURN_DATA.data[top].amount]);
			$("#example1").DataTable().row.add([data.RETURN_DATA.data[top].id,
			data.RETURN_DATA.data[top].meterHolder,
			data.RETURN_DATA.data[top].meterNumber,
			data.RETURN_DATA.data[top].dateCreated,
			data.RETURN_DATA.data[top].kwt,
			data.RETURN_DATA.data[top].amount,
			data.RETURN_DATA.data[top].paymentStatus,
			'<button class="more btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-id="'+data.RETURN_DATA.data[top].id+'">Details</button>']).draw();
        }
// for more details API
$('.more').click(function(){
	$("#more_info").empty();
	var ids = $(this).data('id');
	console.log(ids);
	$.ajax({
			url:"http://localhost:8097/electricity/getById",
			method:"POST",
			data:"userId="+ids,
			dataType:"json",
			cache:false,
			success:function(data){
				console.log(data);
				$('#more_info').append('<div class="col-md-12">\n'+
					'<div class="header_info">\n'+
						'<div class="row">\n'+
						'<div class="col-md-6"><label>Customer Name</label></div><div class="col-md-6"><h5>'+data.RETURN_DATA.data.meterHolder+'</h5></div>\n'+
						'<div class="col-md-6"><label>User Name</label></div><div class="col-md-6"><h5>Ntayirimo column</h5></div>\n'+
						'<div class="col-md-6"><label>Customer Meter Number</label></div><div class="col-md-6"><h5>'+data.RETURN_DATA.data.meterNumber+'</h5></div>\n'+
						'<div class="col-md-6"><label>Customer Phone Number</label></div><div class="col-md-6"><h5>'+data.RETURN_DATA.data.meterNumber+'</h5></div>\n'+
						'<div class="col-md-6"><label>Date and Time</label></div><div class="col-md-6"><h5>'+data.RETURN_DATA.data.dateCreated+'</h5></div>\n'+
						'<div class="col-md-6"><label>Power Units(Kwt) </label></div><div class="col-md-6"><h5>'+data.RETURN_DATA.data.kwt+' &nbsp;Kwt</h5></div>\n'+
						'<div class="col-md-6"><label>Total Amount</label></div><div class="col-md-6"><h5>'+data.RETURN_DATA.data.amount+' &nbsp;Rwf</h5></div>\n'+
						'<div class="col-md-6"><label>Status</label></div><div class="col-md-6"><h5>'+data.RETURN_DATA.data.paymentStatus+'</h5></div>\n'+
					'</div></div>\n'+
				'</div>');
				
			}
		})
})
		
    }
});
</script>
</body>
</html>